{"version":3,"sources":["core/menu.svg","core/images/arrow.svg","config.js","auth/index.js","core/cartHelpers.js","core/MobileMenu.js","core/Menu.js","core/Layout.js","user/Signup.js","user/Signin.js","core/apiCore.js","core/ShowImage.js","core/Card.js","core/Search.js","core/Home.js","auth/PrivateRoute.js","auth/AdminRoute.js","user/UserDashboard.js","user/AdminDashboard.js","admin/AddCategory.js","admin/apiAdmin.js","admin/AddProduct.js","core/Checkbox.js","core/RadioBox.js","core/fixedPrices.js","core/Shop.js","core/Product.js","core/Checkout.js","core/Cart.js","Routes.js","index.js"],"names":["module","exports","API","process","signout","next","window","localStorage","removeItem","fetch","method","then","response","console","log","catch","err","isAuthenticated","getItem","JSON","parse","itemTotal","length","isActiv","history","path","location","pathname","color","background","withRouter","props","className","move","style","display","width","borderBottom","onClick","to","user","role","cursor","push","useState","setMove","border","justifyContent","height","src","Hamburger","Layout","title","description","children","Signup","name","email","password","error","success","values","setValues","handleChange","event","target","value","clickSubmit","preventDefault","headers","Accept","body","stringify","json","data","onChange","type","Signin","loading","redirectToReferrer","signin","setItem","authenticate","getProducts","sortBy","getCategories","getFilteredProducts","skip","limit","filters","ShowImage","item","url","_id","alt","objectFit","Card","product","showViewProductButton","showAddToCartButton","cartUpdate","showRemoveProductButton","setRun","f","run","undefined","redirect","setRedirect","count","setCount","addToCart","cart","Array","from","Set","map","p","id","find","addItem","productId","i","updateItem","shouldRedirect","substring","price","category","moment","createdAt","fromNow","quantity","showViewButton","showAddToCart","splice","Search","categories","search","results","searched","setData","useEffect","searchData","params","query","queryString","list","searchSubmit","e","searchMessage","onSubmit","c","key","placeholder","searchedProducts","Home","productsBySell","setProductsBySell","productsByArrival","setProductsByArrival","setError","marginLeft","PrivateRoute","Component","component","rest","render","state","AdminRoute","Dashboard","AdminDashboard","AddCategory","setName","setSuccess","token","userId","Authorization","createCategory","showError","showSuccess","autoFocus","required","AddProduct","shipping","photo","createdProduct","redirectToProfile","formData","FormData","init","files","set","createProduct","accept","Checkbox","handleFilters","checked","setChecked","handleToggle","currentCategoryId","indexOf","newCheckedCategoryId","RadioBox","prices","setValue","array","Shop","myFilters","setMyFilters","setCategories","setSkip","size","setSize","filteredResults","setFilteredResults","arrowPosition","setArrowPosition","filtersHide","setFiltersHide","loadFilteredResults","newFilters","loadMore","toSkip","filterBy","priceValues","handlePrice","parseInt","Arrow","Product","setProduct","relatedProduct","setRelatedProduct","match","loadSingleProduct","read","listRelated","Checkout","products","successPay","clientToken","instance","address","getToken","getBraintreeClientToken","getTotal","reduce","currentValue","nextValue","buy","requestPaymentMethod","paymentData","paymentMethodNonce","nonce","amount","processPayment","message","showDropIn","onBlur","options","authorization","onInstance","Cart","items","setItems","a","showItems","Routes","exact","ReactDOM","document","getElementById"],"mappings":"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","file":"static/js/main.b69f9643.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/menu.99a849c1.svg\";","module.exports = __webpack_public_path__ + \"static/media/arrow.ae427edb.svg\";","export const API = process.env.REACT_APP_API_URL;\r\n","import { API } from \"../config\";\r\n\r\nexport const signup = user => {\r\n  console.log(\"signup!!!!!\", user.name, user.email, user.password);\r\n  return fetch(`${API}/signup`, {\r\n    method: \"POST\",\r\n    headers: {\r\n      Accept: \"application/json\",\r\n      \"Content-Type\": \"application/json\"\r\n    },\r\n    body: JSON.stringify(user)\r\n  })\r\n    .then(response => {\r\n      console.log(\"response from fetch/signup: \", response);\r\n      return response.json();\r\n    })\r\n    .catch(err => {\r\n      console.log(err);\r\n    });\r\n};\r\n\r\nexport const signin = user => {\r\n  console.log(\"signin!!!!!\", user);\r\n  return fetch(`${API}/signin`, {\r\n    method: \"POST\",\r\n    headers: {\r\n      Accept: \"application/json\",\r\n      \"Content-Type\": \"application/json\"\r\n    },\r\n    body: JSON.stringify(user)\r\n  })\r\n    .then(response => {\r\n      console.log(\"response from fetch/signin: \", response);\r\n      return response.json();\r\n    })\r\n    .catch(err => {\r\n      console.log(err);\r\n    });\r\n};\r\n\r\nexport const authenticate = (data, next) => {\r\n  if (typeof window !== \"undefined\") {\r\n    localStorage.setItem(\"jwt\", JSON.stringify(data));\r\n    next();\r\n  }\r\n};\r\n\r\nexport const signout = next => {\r\n  if (typeof window !== \"undefined\") {\r\n    localStorage.removeItem(\"jwt\");\r\n    // localStorage.clear();\r\n    next();\r\n    return fetch(`${API}/signout`, {\r\n      method: \"GET\"\r\n    })\r\n      .then(response => {\r\n        console.log(\"signout\", response);\r\n      })\r\n      .catch(err => {\r\n        console.log(err);\r\n      });\r\n  }\r\n};\r\n\r\nexport const isAuthenticated = () => {\r\n  if (typeof window == \"undefined\") {\r\n    return false;\r\n  }\r\n  if (localStorage.getItem(\"jwt\")) {\r\n    return JSON.parse(localStorage.getItem(\"jwt\"));\r\n  } else {\r\n    return false;\r\n  }\r\n};\r\n","export const addItem = (item, next) => {\r\n    let cart = []\r\n    if(typeof window !== 'undefined') {\r\n        if(localStorage.getItem(\"cart\")) {\r\n            cart = JSON.parse (localStorage.getItem('cart'));\r\n        }\r\n        cart.push({\r\n            ...item,\r\n            count: 1\r\n        })\r\n\r\n        cart = Array.from(new Set(cart.map((p)=>(p._id)))).map(id =>{\r\n            return cart.find(p => p._id === id);\r\n        });\r\n\r\n    localStorage.setItem('cart', JSON.stringify(cart));\r\n    next();\r\n    }\r\n}\r\n\r\n\r\nexport const itemTotal = () => {\r\n    if(typeof window !== 'undefined') {\r\n        if(localStorage.getItem('cart')) {\r\n            return JSON.parse(localStorage.getItem('cart')).length;\r\n        }\r\n    }\r\n    return 0;\r\n}\r\n\r\n\r\nexport const getCart = () => {\r\n    if (typeof window !== 'undefined') {\r\n        if (localStorage.getItem('cart')) {\r\n            return JSON.parse(localStorage.getItem('cart'));\r\n        }\r\n    }\r\n    return [];\r\n};\r\n\r\nexport const updateItem = (productId, count) => {\r\n    let cart = [];\r\n    if (typeof window !== 'undefined') {\r\n        if (localStorage.getItem('cart')) {\r\n            cart = JSON.parse(localStorage.getItem('cart'));\r\n        }\r\n\r\n        cart.map((product, i) => {\r\n            if (product._id === productId) {\r\n                cart[i].count = count;\r\n            }\r\n        });\r\n\r\n        localStorage.setItem('cart', JSON.stringify(cart));\r\n    }\r\n};\r\n\r\n\r\nexport const removeItem = (productId) => {\r\n    console.log(\"in removeItem productId, count: \",  productId);\r\n    let cart = [];\r\n    if (typeof window !== 'undefined') {\r\n        if (localStorage.getItem('cart')) {\r\n            cart = JSON.parse(localStorage.getItem('cart'));\r\n        }\r\n\r\n        cart.map((product, i) => {\r\n            if (product._id === productId) {\r\n                cart.splice(i, 1);\r\n            }\r\n        });\r\n\r\n        localStorage.setItem('cart', JSON.stringify(cart));\r\n    }\r\n\r\n    return cart;\r\n};\r\n\r\n\r\nexport const emptyCart = next => {\r\n    if(typeof window !== 'undefined') {\r\n        localStorage.removeItem('cart');\r\n        next();\r\n    }\r\n}\r\n","import React, { Fragment } from \"react\";\r\nimport { Link, withRouter, useHistory } from \"react-router-dom\";\r\nimport { signout, isAuthenticated } from \"../auth\";\r\nimport { itemTotal } from \"./cartHelpers\";\r\nimport Hamburger from \"./menu.svg\";\r\n\r\n\r\n\r\nconst isActiv = (history, path) => {\r\n  if (history.location.pathname === path) {\r\n    return { color: \"black\", background: \"#ffffff\" };\r\n  } else {\r\n    return { color: \"#ffffff\" };\r\n  }\r\n};\r\n\r\nconst MobileMenu = (props) => (\r\n    <>\r\n        <div className={props.move}>\r\n            <ul className=\"nav nav-tabs bg-success\" style={{display: \"block\", width: \"100%\", borderBottom: \"0px\"}} onClick={props.onClick}>\r\n              <li className=\"nav-item\">\r\n                <Link className=\"nav-link\" to=\"/\" style={isActiv(props.history, \"/\")}>\r\n                  Home\r\n                </Link>\r\n              </li>\r\n\r\n              <li className=\"nav-item\">\r\n                <Link className=\"nav-link\" to=\"/shop\" style={isActiv(props.history, \"/shop\")}>\r\n                  Plantation\r\n                </Link>\r\n              </li>\r\n\r\n              <li className=\"nav-item\">\r\n                <Link className=\"nav-link\" to=\"/card\" style={isActiv(props.history, \"/card\")}>\r\n                  Basket\r\n                  <sup>\r\n                    <small className=\"cart-badge\">{itemTotal()}</small>\r\n                  </sup>\r\n                </Link>\r\n              </li>\r\n\r\n              {isAuthenticated() && isAuthenticated().user.role === 0 && (\r\n                <li className=\"nav-item\">\r\n                  <Link\r\n                    className=\"nav-link\"\r\n                    to=\"/user/dashboard\"\r\n                    style={isActiv(props.history, \"/user/dashboard\")}\r\n                  >\r\n                    Dashboard\r\n                  </Link>\r\n                </li>\r\n              )}\r\n\r\n              {isAuthenticated() && isAuthenticated().user.role === 1 && (\r\n                <li className=\"nav-item\">\r\n                  <Link\r\n                    className=\"nav-link\"\r\n                    to=\"/admin/dashboard\"\r\n                    style={isActiv(props.history, \"/admin/dashboard\")}\r\n                  >\r\n                    Dashboard\r\n                  </Link>\r\n                </li>\r\n              )}\r\n\r\n              {!isAuthenticated() && (\r\n                <Fragment>\r\n                  <li className=\"nav-item\">\r\n                    <Link\r\n                      className=\"nav-link\"\r\n                      to=\"/signin\"\r\n                      style={isActiv(props.history, \"/signin\")}\r\n                    >\r\n                      Login\r\n                    </Link>\r\n                  </li>\r\n                  <li className=\"nav-item\">\r\n                    <Link\r\n                      className=\"nav-link\"\r\n                      to=\"/signup\"\r\n                      style={isActiv(props.history, \"/signup\")}\r\n                    >\r\n                      Signup\r\n                    </Link>\r\n                  </li>\r\n                </Fragment>\r\n              )}\r\n              {isAuthenticated() && (\r\n                <div>\r\n                  <li className=\"nav-item\">\r\n                    <span\r\n                      className=\"nav-link\"\r\n                      style={{ cursor: \"pointer\", color: \"#ffffff\" }}\r\n                      onClick={() =>\r\n                        signout(() => {\r\n                          props.history.push(\"/\");\r\n                        })\r\n                      }\r\n                    >\r\n                      Signout\r\n                    </span>\r\n                  </li>\r\n                </div>\r\n              )}\r\n            </ul>\r\n        </div>\r\n    </>\r\n);\r\n\r\nexport default withRouter(MobileMenu);\r\n","import React, { Fragment, useState }  from \"react\";\r\nimport { Link, withRouter } from \"react-router-dom\";\r\nimport { signout, isAuthenticated } from \"../auth\";\r\nimport { itemTotal } from \"./cartHelpers\";\r\nimport Hamburger from \"./menu.svg\";\r\nimport MobileMenu from \"./MobileMenu\"\r\n\r\n\r\nfunction Menu (props) {\r\n\r\n    const [navOpen, setNavOpen] = useState(false)\r\n    const [move, setMove] = useState(\"mobile-menu\");\r\n    const history = props.history;\r\n\r\n    const isActiv = (history, path) => {\r\n      if (history.location.pathname === path) {\r\n        return { color: \"black\", background: \"#ffffff\", border: \"1px solid white\" };\r\n      } else {\r\n        return { color: \"#ffffff\" };\r\n      }\r\n    };\r\n\r\n\r\n    return (\r\n        <>\r\n            <MobileMenu move={move} onClick = {()=>setMove(\"mobile-menu\")}/>\r\n\r\n            <div\r\n              style={{\r\n                display: \"flex\",\r\n                justifyContent: \"space-between\",\r\n                background: \"#28A745\",\r\n                height: \"43px\"\r\n              }}\r\n            >\r\n                <div className=\"logo\">wetreenow!</div>\r\n                <ul className=\"nav nav-tabs bg-success desktop-only\">\r\n                  <li className=\"nav-item\">\r\n                    <Link className=\"nav-link\" to=\"/\" style={isActiv(history, \"/\")}>\r\n                      Home\r\n                    </Link>\r\n                  </li>\r\n\r\n                  <li className=\"nav-item\">\r\n                    <Link className=\"nav-link\" to=\"/shop\" style={isActiv(history, \"/shop\")}>\r\n                      Plantation\r\n                    </Link>\r\n                  </li>\r\n\r\n                  <li className=\"nav-item\">\r\n                    <Link className=\"nav-link\" to=\"/card\" style={isActiv(history, \"/card\")}>\r\n                      Basket{\" \"}\r\n                      <sup>\r\n                        <small className=\"cart-badge\">{itemTotal()}</small>\r\n                      </sup>\r\n                    </Link>\r\n                  </li>\r\n\r\n                  {isAuthenticated() && isAuthenticated().user.role === 0 && (\r\n                    <li className=\"nav-item\">\r\n                      <Link\r\n                        className=\"nav-link\"\r\n                        to=\"/user/dashboard\"\r\n                        style={isActiv(history, \"/user/dashboard\")}\r\n                      >\r\n                        Dashboard\r\n                      </Link>\r\n                    </li>\r\n                  )}\r\n\r\n                  {isAuthenticated() && isAuthenticated().user.role === 1 && (\r\n                    <li className=\"nav-item\">\r\n                      <Link\r\n                        className=\"nav-link\"\r\n                        to=\"/admin/dashboard\"\r\n                        style={isActiv(history, \"/admin/dashboard\")}\r\n                      >\r\n                        Dashboard\r\n                      </Link>\r\n                    </li>\r\n                  )}\r\n\r\n                  {!isAuthenticated() && (\r\n                    <Fragment>\r\n                      <li className=\"nav-item\">\r\n                        <Link\r\n                          className=\"nav-link\"\r\n                          to=\"/signin\"\r\n                          style={isActiv(history, \"/signin\")}\r\n                        >\r\n                          Login\r\n                        </Link>\r\n                      </li>\r\n                      <li className=\"nav-item\">\r\n                        <Link\r\n                          className=\"nav-link\"\r\n                          to=\"/signup\"\r\n                          style={isActiv(history, \"/signup\")}\r\n                        >\r\n                          Signup\r\n                        </Link>\r\n                      </li>\r\n                    </Fragment>\r\n                  )}\r\n                  {isAuthenticated() && (\r\n                    <div>\r\n                      <li className=\"nav-item\">\r\n                        <span\r\n                          className=\"nav-link\"\r\n                          style={{ cursor: \"pointer\", color: \"#ffffff\" }}\r\n                          onClick={() =>\r\n                            signout(() => {\r\n                              history.push(\"/\");\r\n                            })\r\n                          }\r\n                        >\r\n                          Signout\r\n                        </span>\r\n                      </li>\r\n                    </div>\r\n                  )}\r\n                </ul>\r\n                <div className=\"hamburger\" onClick={()=>setMove(\"mobile-menu move\")}><img src={Hamburger} className=\"icon\"/></div>\r\n            </div>\r\n        </>\r\n    )\r\n}\r\n\r\nexport default withRouter(Menu);\r\n","import React from \"react\";\r\nimport Menu from \"./Menu\";\r\n\r\nconst Layout = ({\r\n  title = \"Title\",\r\n  description = \"Description\",\r\n  children,\r\n  className\r\n}) => (\r\n  <div>\r\n    <Menu />\r\n    <div className=\"jumbotron\">\r\n      <h2>{title}</h2>\r\n      <p className=\"lead\">{description}</p>\r\n    </div>\r\n    <div className={className}>{children}</div>\r\n  </div>\r\n);\r\n\r\nexport default Layout;\r\n","import React, { useState } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport Layout from \"../core/Layout\";\r\nimport { signup } from \"../auth\";\r\n\r\nconst Signup = () => {\r\n  const [values, setValues] = useState({\r\n    name: \"\",\r\n    email: \"\",\r\n    password: \"\",\r\n    error: \"\",\r\n    success: false\r\n  });\r\n\r\n  const { name, email, password, error, success } = values;\r\n\r\n  const handleChange = name => event => {\r\n    setValues({ ...values, error: false, [name]: event.target.value });\r\n  };\r\n\r\n  const clickSubmit = event => {\r\n    console.log(\"click submit happened\");\r\n    event.preventDefault();\r\n    setValues({ ...values, error: false });\r\n    signup({ name, email, password }).then(data => {\r\n      console.log(\"data in clickSubmit: \", data);\r\n      if (data.error) {\r\n        console.log(\"submit error: \", data.error);\r\n        setValues({ ...values, error: data.error, success: false });\r\n      } else {\r\n        setValues({\r\n          ...values,\r\n          name: \"\",\r\n          email: \"\",\r\n          password: \"\",\r\n          error: \"\",\r\n          success: true\r\n        });\r\n      }\r\n    });\r\n  };\r\n\r\n  const signUpForm = () => (\r\n    <form>\r\n      <div className=\"form-group\">\r\n        <label className=\"text-muted\">Name</label>\r\n        <input\r\n          onChange={handleChange(\"name\")}\r\n          type=\"text\"\r\n          className=\"form-control\"\r\n          value={name}\r\n        />\r\n      </div>\r\n      <div className=\"form-group\">\r\n        <label className=\"text-muted\">Email</label>\r\n        <input\r\n          onChange={handleChange(\"email\")}\r\n          type=\"email\"\r\n          className=\"form-control\"\r\n          value={email}\r\n        />\r\n      </div>\r\n      <div className=\"form-group\">\r\n        <label className=\"text-muted\">Password</label>\r\n        <input\r\n          onChange={handleChange(\"password\")}\r\n          type=\"password\"\r\n          className=\"form-control\"\r\n          value={password}\r\n        />\r\n      </div>\r\n      <button onClick={clickSubmit} className=\"btn btn-primary\">\r\n        Submit\r\n      </button>\r\n    </form>\r\n  );\r\n\r\n  const showError = () => (\r\n    <div\r\n      className=\"alert alert-danger\"\r\n      style={{ display: error ? \"\" : \"none\" }}\r\n    >\r\n      {error}\r\n    </div>\r\n  );\r\n\r\n  const showSuccess = () => (\r\n    <div\r\n      className=\"alert alert-info\"\r\n      style={{ display: success ? \"\" : \"none\" }}\r\n    >\r\n      New account is created. Please <Link to=\"/signin\"> Signin</Link>\r\n    </div>\r\n  );\r\n\r\n  return (\r\n    <Layout\r\n      title=\"Singup\"\r\n      description=\"Signup and plant the trees with wetreenow!\"\r\n      className=\"container col-md-4 offset-md-4\"\r\n    >\r\n      {showSuccess()}\r\n      {showError()}\r\n      {signUpForm()}\r\n    </Layout>\r\n  );\r\n};\r\n\r\nexport default Signup;\r\n","import React, { useState } from \"react\";\r\nimport { Redirect } from \"react-router-dom\";\r\nimport Layout from \"../core/Layout\";\r\nimport { signin, authenticate, isAuthenticated } from \"../auth\";\r\n\r\nconst Signin = () => {\r\n  const [values, setValues] = useState({\r\n    email: \"adiadiadi@adi.com\",\r\n    password: \"adiadi1\",\r\n    error: \"\",\r\n    loading: false,\r\n    redirectToReferrer: false\r\n  });\r\n\r\n  const { email, password, error, loading, redirectToReferrer } = values;\r\n  const { user } = isAuthenticated();\r\n\r\n  const handleChange = name => event => {\r\n    setValues({ ...values, error: false, [name]: event.target.value });\r\n  };\r\n\r\n  const clickSubmit = event => {\r\n    console.log(\"click submit happened\");\r\n    event.preventDefault();\r\n    setValues({ ...values, error: false, loading: true });\r\n    signin({ email, password }).then(data => {\r\n      console.log(\"data in clickSubmit: \", data);\r\n      if (data.error) {\r\n        console.log(\"submit error: \", data.error);\r\n        setValues({ ...values, error: data.error, loading: false });\r\n      } else {\r\n        authenticate(data, () => {\r\n          setValues({\r\n            ...values,\r\n            redirectToReferrer: true\r\n          });\r\n        });\r\n      }\r\n    });\r\n  };\r\n\r\n  const signUpForm = () => (\r\n    <form>\r\n      <div className=\"form-group\">\r\n        <label className=\"text-muted\">Email</label>\r\n        <input\r\n          onChange={handleChange(\"email\")}\r\n          type=\"email\"\r\n          className=\"form-control\"\r\n          value={email}\r\n        />\r\n      </div>\r\n      <div className=\"form-group\">\r\n        <label className=\"text-muted\">Password</label>\r\n        <input\r\n          onChange={handleChange(\"password\")}\r\n          type=\"password\"\r\n          className=\"form-control\"\r\n          value={password}\r\n        />\r\n      </div>\r\n      <button onClick={clickSubmit} className=\"btn btn-primary\">\r\n        Submit\r\n      </button>\r\n    </form>\r\n  );\r\n\r\n  const showError = () => (\r\n    <div\r\n      className=\"alert alert-danger\"\r\n      style={{ display: error ? \"\" : \"none\" }}\r\n    >\r\n      {error}\r\n    </div>\r\n  );\r\n\r\n  const showLoading = () =>\r\n    loading && (\r\n      <div className=\"alert alert-info\">\r\n        <h2>Loading...</h2>\r\n      </div>\r\n    );\r\n\r\n  const redirectUser = () => {\r\n    if (redirectToReferrer) {\r\n      if (user && user.role === 1) {\r\n        return <Redirect to=\"/admin/dashboard\" />;\r\n      } else {\r\n        return <Redirect to=\"/user/dashboard\" />;\r\n      }\r\n    }\r\n    if (isAuthenticated()) {\r\n      return <Redirect to=\"/\" />;\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Layout\r\n      title=\"Login\"\r\n      description=\"Login and change the planet!\"\r\n      className=\"container col-md-4 offset-md-4\"\r\n    >\r\n      {showLoading()}\r\n      {showError()}\r\n      {signUpForm()}\r\n      {redirectUser()}\r\n    </Layout>\r\n  );\r\n};\r\n\r\nexport default Signin;\r\n","import { API } from \"../config\";\r\nimport queryString from \"query-string\";\r\n\r\nexport const getProducts = (sortBy) => {\r\n  return fetch(`${API}/products?sortBy=${sortBy}&order=desc&limit=4`, {\r\n    method: \"GET\"\r\n  })\r\n    .then(response => {\r\n      return response.json();\r\n    })\r\n    .catch(err => console.log(err));\r\n};\r\n\r\n\r\nexport const getCategories = () => {\r\n  return fetch(`${API}/categories`, {\r\n    method: \"GET\"\r\n  })\r\n    .then(response => {\r\n      return response.json();\r\n    })\r\n    .catch(err => console.log(err));\r\n};\r\n\r\n\r\nexport const getFilteredProducts = (skip, limit, filters = {}) => {\r\n  console.log(\"createFilteredProducts!!!!!\");\r\n  const data = {\r\n      limit, skip, filters\r\n  }\r\n\r\n  return fetch(`${API}/products/by/search/`, {\r\n    method: \"POST\",\r\n    headers: {\r\n      Accept: \"application/json\",\r\n      \"Content-Type\": \"application/json\"\r\n    },\r\n    body: JSON.stringify(data)\r\n  })\r\n    .then(response => {\r\n      console.log(\"response from fetch/products/by/search/: \", response);\r\n      return response.json();\r\n    })\r\n    .catch(err => {\r\n      console.log(err);\r\n    });\r\n};\r\n\r\n\r\nexport const list = params => {\r\n    const query = queryString.stringify(params)\r\n    console.log(\"query: \", query);\r\n    return fetch(`${API}/products/search?${query}`, {\r\n    method: \"GET\"\r\n  })\r\n    .then(response => {\r\n        console.log(\"response from products!!!: \", response);\r\n      return response.json();\r\n    })\r\n    .catch(err => console.log(err));\r\n};\r\n\r\n\r\nexport const read = (productId) => {\r\n  return fetch(`${API}/product/${productId}`, {\r\n    method: \"GET\"\r\n  })\r\n    .then(response => {\r\n      return response.json();\r\n    })\r\n    .catch(err => console.log(err));\r\n};\r\n\r\n\r\nexport const listRelated = (productId) => {\r\n  // const productId = queryString.stringify(params)\r\n  return fetch(`${API}/products/related/${productId}`, {\r\n    method: \"GET\"\r\n  })\r\n    .then(response => {\r\n      return response.json();\r\n    })\r\n    .catch(err => console.log(err));\r\n};\r\n\r\n\r\nexport const getBraintreeClientToken = (userId, token) => {\r\n  // const productId = queryString.stringify(params)\r\n  console.log(\"in getBraintreeClientToken\");\r\n  return fetch(`${API}/braintree/getToken/${userId}`, {\r\n    method: \"GET\",\r\n    headers: {\r\n      Accept: \"application/json\",\r\n      \"Content-Type\": \"application/json\",\r\n      Authorization: `Bearer ${token}`\r\n    }\r\n  })\r\n    .then(response => {\r\n        console.log(\"in getBraintreeClientToken response: \", response);\r\n        return response.json();\r\n    })\r\n    .catch(err => console.log(err));\r\n};\r\n\r\n\r\n\r\nexport const processPayment = (userId, token, paymentData) => {\r\n    return fetch(`${API}/braintree/payment/${userId}`, {\r\n        method: \"POST\",\r\n        headers: {\r\n            Accept: \"application/json\",\r\n            \"Content-Type\": \"application/json\",\r\n            Authorization: `Bearer ${token}`\r\n        },\r\n        body: JSON.stringify(paymentData)\r\n    })\r\n        .then(response => {\r\n            return response.json();\r\n        })\r\n        .catch(err => console.log(err));\r\n};\r\n","import React from 'react';\r\nimport {API} from '../config'\r\n\r\nconst ShowImage = ({item, url}) => {\r\n    return (\r\n        <div className=\"search-product-img-container\">\r\n            <img src={`${API}/${url}/photo/${item._id}`} alt={item.name}\r\n            className=\"mb-3\" style={{height: \"100%\", width: \"100%\", objectFit: \"cover\"}}/>\r\n        </div>\r\n    )\r\n}\r\n\r\n\r\nexport default ShowImage;\r\n","import React, {useEffect, useState} from 'react'\r\nimport {Link, Redirect} from 'react-router-dom'\r\nimport ShowImage from './ShowImage'\r\nimport moment from \"moment\"\r\nimport {addItem, updateItem, removeItem} from './cartHelpers'\r\n\r\nconst Card = ({\r\n    product,\r\n    showViewProductButton = true,\r\n    showAddToCartButton = true,\r\n    cartUpdate = false,\r\n    showRemoveProductButton = false,\r\n    setRun = f => f, // default value of function, no necessary\r\n    run = undefined\r\n    }) => {\r\n\r\n\r\n    // const [locationChange, setLocationChange] = useState(false)\r\n    const [redirect, setRedirect] = useState(false);\r\n    const [count, setCount] = useState(product.count);\r\n\r\n\r\n    const showViewButton = (showViewProductButton)=>{\r\n        return (\r\n            showViewProductButton && (\r\n                <Link to={`/product/${product._id}`} className=\"mr-1\">\r\n                    <button className=\"btn btn-outline-primary mr-2\">\r\n                        View Product\r\n                    </button>\r\n                 </Link>\r\n            )\r\n        )\r\n    };\r\n\r\n    const addToCart = ()=> {\r\n        addItem(product, () => {\r\n            setRedirect(true);\r\n        })\r\n    }\r\n\r\n    const shouldRedirect = redirect => {\r\n        if(redirect) {\r\n            console.log(\"shouldRedirect true\");\r\n            return <Redirect to=\"/cart\"/>\r\n        }\r\n    }\r\n\r\n    const showAddToCart = (showAddToCartButton)=> {\r\n        return (\r\n            showAddToCartButton && (\r\n                <button onClick={addToCart} className=\"btn btn-outline-primary mt-2 mb-2\">\r\n                    Add to card\r\n                </button>\r\n            )\r\n\r\n        )\r\n    }\r\n\r\n    const showStock = (quantity) => {\r\n        return quantity.quantity > 0 ? <span className=\"badge badge-primary badge-pill\">In Stock</span> : <span>Out Of Stock</span>\r\n    }\r\n\r\n    const handleChange = productId => event => {\r\n      setRun(!run); // run useEffect in parent Cart\r\n      setCount(event.target.value < 1 ? 1 : event.target.value);\r\n      if (event.target.value >= 1) {\r\n        updateItem(productId, event.target.value);\r\n      }\r\n    };\r\n\r\n    const showCartUpdateOptions = cardUpdate => {\r\n        return cartUpdate && <div>\r\n                <div className=\"input-group mb-3\">\r\n                    <div className=\"input-group-prepend\">\r\n                        <span className=\"input-group-text\">\r\n                            Adjust Quantity\r\n                        </span>\r\n\r\n                        <input type=\"number\" className=\"form-control\" value={count} onChange={handleChange(product._id)}/>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n    }\r\n\r\n    const showRemoveButton = showRemoveProductButton => {\r\n        console.log(\"in show remove button\");\r\n        return (\r\n            !showAddToCartButton && (\r\n                <button onClick={() =>{removeItem(product._id); setRun(!run);}} className=\"btn btn-outline-danger mt-2 mb-2\">\r\n                    Remove Product\r\n                </button>\r\n            )\r\n\r\n        )\r\n    }\r\n\r\n    return (\r\n            <div className=\"card\">\r\n                <div className=\"card-header name\">\r\n                    {product.name}\r\n                </div>\r\n                <div className=\"card-body\">\r\n                {shouldRedirect(redirect)}\r\n\r\n                <ShowImage item={product} url=\"product\"/>\r\n                   <p className=\"lead mt-2\">{product.description.substring(0, 100)}</p>\r\n                   <p className=\"black-10\">{product.price}</p>\r\n                   <p className=\"black-9\">Category: {product.category && product.category.name}</p>\r\n                   <p className=\"black-8\">Added {moment(product.createdAt).fromNow()}</p>\r\n\r\n                   {showStock(product)}\r\n                   <br/>\r\n                   {showViewButton(showViewProductButton)}\r\n                   {showAddToCart(showAddToCartButton)}\r\n                   {showRemoveButton(showRemoveProductButton)}\r\n                   {showCartUpdateOptions(cartUpdate)}\r\n                </div>\r\n            </div>\r\n    )\r\n}\r\n\r\n\r\nexport default Card;\r\n","import React, {useEffect, useState} from \"react\";\r\nimport {getCategories, list} from './apiCore';\r\nimport Card from './Card';\r\n\r\n\r\n\r\nconst Search = () => {\r\n    const [data, setData] = useState({\r\n        categories: [],\r\n        category: '',\r\n        search: '',\r\n        results: [],\r\n        searched: false\r\n    });\r\n\r\n    const {categories, category, search, results, searched} = data\r\n\r\n    const loadCategories = () => {\r\n        getCategories().then(data => {\r\n            if(data.error) {\r\n                console.log(data.error);\r\n            } else {\r\n                setData({...data, categories: data})\r\n            }\r\n        })\r\n    }\r\n\r\n   useEffect(()=>{\r\n       loadCategories()\r\n   }, [])\r\n\r\n   const searchData = () => {\r\n       console.log(search, category);\r\n       if(search) {\r\n           list({search: search || undefined, category: category}).then(data).then(response=> {\r\n               if(response.error){\r\n                   console.log(response.error);\r\n               } else (\r\n                   setData({...data, results: response, searched: true})\r\n               )\r\n           });\r\n       }\r\n   }\r\n\r\n   const searchSubmit = (e) => {\r\n       e.preventDefault()\r\n       searchData();\r\n   };\r\n\r\n   const handleChange = (name) => (event) => {\r\n       setData({...data, [name]: event.target.value, searched: false});\r\n   };\r\n\r\n\r\n   const searchMessage = (searched, results) => {\r\n       if(searched && results.length > 0) {\r\n           return `Found ${results.length} products`;\r\n       }\r\n       if(searched && results.length < 1) {\r\n           return `No products found`;\r\n       }\r\n   }\r\n\r\n   const searchedProducts = (results = []) => {\r\n       return (\r\n           <div>\r\n               <h2 className=\"mt-4 mb-4\">\r\n                   {searchMessage(searched, results)}\r\n               </h2>\r\n               <div className=\"product-search-container-div\">\r\n                       {results.map((product, i) => (\r\n                           <div className=\"search-card-container\">\r\n                               <Card product={product} key={i} />\r\n                           </div>\r\n                           )\r\n                       )}\r\n               </div>\r\n           </div>\r\n       )\r\n   }\r\n\r\n  const searchForm = () => {\r\n      return (\r\n          <form onSubmit={searchSubmit}>\r\n              <span className=\"input-group-text\">\r\n                  <div className=\"input-group input-group-lg\">\r\n\r\n                      <div className=\"input-group-prepend\">\r\n                          <select className=\"btn mr-2\" onChange={handleChange(\"category\")}>\r\n                              <option value=\"All\">Pick Category</option>\r\n                              {categories.map((c, i)=>(\r\n                                  <option key={i} value={c._id}>{c.name}</option>\r\n                              ))}\r\n                          </select>\r\n                      </div>\r\n                      <input type=\"search\"\r\n                       className=\"form-control\"\r\n                       onChange={handleChange('search')}\r\n                       placeholder=\"Search by name\"\r\n                       />\r\n                  </div>\r\n                  <div className=\"btn input-group-append\" style={{border: 'none'}}>\r\n                      <button className=\"btn input-group-text\">Search</button>\r\n                  </div>\r\n               </span>\r\n          </form>\r\n      )\r\n\r\n  }\r\n\r\n    return (\r\n        <div className=\"search-container\">\r\n             <div className=\"search-bar\">\r\n                {searchForm()}\r\n             </div>\r\n             <div className=\"product-search-container\">\r\n                {searchedProducts(results)}\r\n             </div>\r\n        </div>\r\n    )\r\n}\r\n\r\n\r\nexport default Search;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport Layout from \"./Layout\";\r\nimport { getProducts } from \"./apiCore\";\r\nimport Card from \"./Card\";\r\nimport Search from \"./Search\";\r\n\r\nconst Home = () => {\r\n  const [productsBySell, setProductsBySell] = useState([]);\r\n  const [productsByArrival, setProductsByArrival] = useState([]);\r\n  const [error, setError] = useState(false);\r\n\r\n  const loadProductsBySell = () => {\r\n    getProducts(\"sold\").then(data => {\r\n      if (data.error) {\r\n        setError(data.error);\r\n      } else {\r\n        setProductsBySell(data);\r\n      }\r\n    });\r\n  };\r\n\r\n  const loadProductsByArrival = () => {\r\n    getProducts(\"createdAt\").then(data => {\r\n      if (data.error) {\r\n        setError(data.error);\r\n      } else {\r\n        setProductsByArrival(data);\r\n      }\r\n    });\r\n  };\r\n\r\n  useEffect(() => {\r\n    loadProductsByArrival();\r\n    loadProductsBySell();\r\n  }, []);\r\n\r\n  return (\r\n    <Layout\r\n      title=\"Home Page\"\r\n      description=\"On this page you can plant the trees! Every tree you plant gets own id assigned to your account :)\"\r\n      className=\"container-fluid\"\r\n    >\r\n      <Search />\r\n\r\n\r\n      <h2 className=\"mb-4\" style={{marginLeft: \"20px\"}}>Most Popular:</h2>\r\n      <div className=\"product-search-container\">\r\n          <div className=\"product-search-container-div\">\r\n            {productsBySell.map((product, i) => (\r\n              <div className=\"search-card-container\" key={i}>\r\n                <Card product={product} />\r\n              </div>\r\n          ))}\r\n          </div>\r\n      </div>\r\n\r\n      <h2 className=\"mb-4\" style={{marginLeft: \"20px\"}}>Newest:</h2>\r\n      <div className=\"product-search-container\">\r\n          <div className=\"product-search-container-div\">\r\n              {productsByArrival.map((product, i) => (\r\n                  <div className=\"search-card-container\" key={i}>\r\n                    <Card product={product} />\r\n                  </div>\r\n              ))}\r\n\r\n          </div>\r\n      </div>\r\n    </Layout>\r\n  );\r\n};\r\n\r\nexport default Home;\r\n","import React, { Component } from \"react\";\r\nimport { Route, Redirect } from \"react-router-dom\";\r\nimport { isAuthenticated } from \"./index\";\r\n\r\nconst PrivateRoute = ({ component: Component, ...rest }) => (\r\n  <Route\r\n    {...rest}\r\n    render={props =>\r\n      isAuthenticated() ? (\r\n        <Component {...props} />\r\n      ) : (\r\n        <Redirect\r\n          to={{ pathname: \"/signin\", state: { from: props.location } }}\r\n        />\r\n      )\r\n    }\r\n  />\r\n);\r\n\r\nexport default PrivateRoute;\r\n","import React, { Component } from \"react\";\r\nimport { Route, Redirect } from \"react-router-dom\";\r\nimport { isAuthenticated } from \"./index\";\r\n\r\nconst AdminRoute = ({ component: Component, ...rest }) => (\r\n  <Route\r\n    {...rest}\r\n    render={props =>\r\n      isAuthenticated() && isAuthenticated().user.role === 1 ? (\r\n        <Component {...props} />\r\n      ) : (\r\n        <Redirect\r\n          to={{ pathname: \"/signin\", state: { from: props.location } }}\r\n        />\r\n      )\r\n    }\r\n  />\r\n);\r\n\r\nexport default AdminRoute;\r\n","import React from \"react\";\r\nimport Layout from \"../core/Layout\";\r\nimport { isAuthenticated } from \"../auth\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nconst Dashboard = () => {\r\n  const {\r\n    user: { _id, name, email, role }\r\n  } = isAuthenticated();\r\n\r\n  const userLinks = () => {\r\n    return (\r\n      <div className=\"card\">\r\n        <h4 className=\"card-header\">User Links</h4>\r\n        <ul className=\"list-group\">\r\n          <li className=\"list-group-item\">\r\n            <Link className=\"nav-link\" to=\"/card\">\r\n              My Card\r\n            </Link>\r\n          </li>\r\n          <li className=\"list-group-item\">\r\n            <Link className=\"nav-link\" to=\"/profile/update\">\r\n              Update Profile\r\n            </Link>\r\n          </li>\r\n        </ul>\r\n      </div>\r\n    );\r\n  };\r\n\r\n  const userInfo = () => {\r\n    return (\r\n      <div className=\"card mb-5\">\r\n        <h3 className=\"card-header\">User Information</h3>\r\n        <ul className=\"list-group\">\r\n          <li className=\"list-group-item\">{name}</li>\r\n          <li className=\"list-group-item\">{email}</li>\r\n          <li className=\"list-group-item\">\r\n            {role === 1 ? \"Admin\" : \"Registered User\"}\r\n          </li>\r\n        </ul>\r\n      </div>\r\n    );\r\n  };\r\n\r\n  const purchaseHistory = () => {\r\n    return (\r\n      <div className=\"card mb-5\">\r\n        <h3 className=\"card-header\">Purchase History</h3>\r\n        <li className=\"list-group-item\">history</li>\r\n      </div>\r\n    );\r\n  };\r\n\r\n  return (\r\n    <Layout\r\n      title=\"Dashboard\"\r\n      description={`Hey ${name}!!`}\r\n      className=\"container-fluid\"\r\n    >\r\n      <div className=\"dashboard-container\">\r\n        <div className=\"col-9 width\">\r\n          {userInfo()}\r\n          {purchaseHistory()}\r\n        </div>\r\n        <div className=\"user-links\">{userLinks()} </div>\r\n      </div>\r\n    </Layout>\r\n  );\r\n};\r\n\r\nexport default Dashboard;\r\n","import React from \"react\";\r\nimport Layout from \"../core/Layout\";\r\nimport { isAuthenticated } from \"../auth\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nconst AdminDashboard = () => {\r\n  const {\r\n    user: { _id, name, email, role }\r\n  } = isAuthenticated();\r\n\r\n  const adminLinks = () => {\r\n    return (\r\n      <div className=\"card\">\r\n        <h4 className=\"card-header\">Admin Links</h4>\r\n        <ul className=\"list-group\">\r\n          <li className=\"list-group-item\">\r\n            <Link className=\"nav-link\" to=\"/create/category\">\r\n              Create Category\r\n            </Link>\r\n          </li>\r\n          <li className=\"list-group-item\">\r\n            <Link className=\"nav-link\" to=\"/create/product\">\r\n              Create Product\r\n            </Link>\r\n          </li>\r\n        </ul>\r\n      </div>\r\n    );\r\n  };\r\n\r\n  const adminInfo = () => {\r\n    return (\r\n      <div className=\"card mb-5\">\r\n        <h3 className=\"card-header\">User Information</h3>\r\n        <ul className=\"list-group\">\r\n          <li className=\"list-group-item\">{name}</li>\r\n          <li className=\"list-group-item\">{email}</li>\r\n          <li className=\"list-group-item\">\r\n            {role === 1 ? \"Admin\" : \"Registered User\"}\r\n          </li>\r\n        </ul>\r\n      </div>\r\n    );\r\n  };\r\n\r\n  return (\r\n    <Layout\r\n      title=\"Dashboard\"\r\n      description={`Hey ${name}!!`}\r\n      className=\"container-fluid\"\r\n    >\r\n      <div className=\"row\">\r\n        <div className=\"col-3\">{adminLinks()} </div>\r\n        <div className=\"col-9\">{adminInfo()}</div>\r\n      </div>\r\n    </Layout>\r\n  );\r\n};\r\n\r\nexport default AdminDashboard;\r\n","import React, { useState } from \"react\";\r\nimport Layout from \"../core/Layout\";\r\nimport { isAuthenticated } from \"../auth\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { createCategory } from \"./apiAdmin\";\r\n\r\nconst AddCategory = () => {\r\n  const [name, setName] = useState(\"\");\r\n  const [error, setError] = useState(false);\r\n  const [success, setSuccess] = useState(false);\r\n  // destructure user and token from localstorage\r\n  const { user, token } = isAuthenticated();\r\n\r\n  const handleChange = e => {\r\n    setError(\"\");\r\n    setName(e.target.value);\r\n  };\r\n\r\n  const clickSubmit = e => {\r\n    e.preventDefault();\r\n    setError(\"\");\r\n    setSuccess(false);\r\n    // make request to api to create category\r\n    createCategory(user._id, token, { name }).then(data => {\r\n      if (data.error) {\r\n        setError(data.error);\r\n      } else {\r\n        setError(\"\");\r\n        setSuccess(true);\r\n      }\r\n    });\r\n  };\r\n\r\n  const newCategoryFom = () => (\r\n    <form onSubmit={clickSubmit}>\r\n      <div className=\"form-group\">\r\n        <label className=\"text-muted\">Name</label>\r\n        <input\r\n          type=\"text\"\r\n          className=\"form-control\"\r\n          onChange={handleChange}\r\n          value={name}\r\n          autoFocus\r\n          required\r\n        />\r\n      </div>\r\n      <button className=\"btn btn-outline-primary\">Create Category</button>\r\n    </form>\r\n  );\r\n\r\n  const showSuccess = () => {\r\n    if (success) {\r\n      return <h3 className=\"text-success\">{name} is created</h3>;\r\n    }\r\n  };\r\n\r\n  const showError = () => {\r\n    if (error) {\r\n      return <h3 className=\"text-danger\">{name} should be unique</h3>;\r\n    }\r\n  };\r\n\r\n  const goBack = () => {\r\n    return (\r\n      <div className=\"mt-4\">\r\n        <Link to=\"/admin/dashboard\" className=\"text-warning\">\r\n          Back to Dashboard\r\n        </Link>\r\n      </div>\r\n    );\r\n  };\r\n\r\n  return (\r\n    <Layout\r\n      title=\"Add a new category\"\r\n      description={`Hey ${user.name}, ready to add a new category!`}\r\n      className=\"container-fluid\"\r\n    >\r\n      <div className=\"row\">\r\n        <div className=\"col-md-8 offset-md-2\">\r\n          {showError()}\r\n          {showSuccess()}\r\n          {newCategoryFom()}\r\n          {goBack()}\r\n        </div>\r\n      </div>\r\n    </Layout>\r\n  );\r\n};\r\n\r\nexport default AddCategory;\r\n","import { API } from \"../config\";\r\n\r\nexport const createCategory = (userId, token, category) => {\r\n  console.log(\"createCategory!!!!!\");\r\n  return fetch(`${API}/category/create/${userId}`, {\r\n    method: \"POST\",\r\n    headers: {\r\n      Accept: \"application/json\",\r\n      \"Content-Type\": \"application/json\",\r\n      Authorization: `Bearer ${token}`\r\n    },\r\n    body: JSON.stringify(category)\r\n  })\r\n    .then(response => {\r\n      console.log(\"response from fetch/createCategory: \", response);\r\n      return response.json();\r\n    })\r\n    .catch(err => {\r\n      console.log(err);\r\n    });\r\n};\r\n\r\nexport const createProduct = (userId, token, product) => {\r\n  console.log(\"product!!!!!\");\r\n  return fetch(`${API}/product/create/${userId}`, {\r\n    method: \"POST\",\r\n    headers: {\r\n      Accept: \"application/json\",\r\n      Authorization: `Bearer ${token}`\r\n    },\r\n    body: product\r\n  })\r\n    .then(response => {\r\n      console.log(\"response from fetch/product: \", response);\r\n      return response.json();\r\n    })\r\n    .catch(err => {\r\n      console.log(err);\r\n    });\r\n};\r\n\r\nexport const getCategories = () => {\r\n  return fetch(`${API}/categories`, {\r\n    method: \"GET\"\r\n  })\r\n    .then(response => {\r\n      return response.json();\r\n    })\r\n    .catch(err => console.log(err));\r\n};\r\n","import React, { useState, useEffect } from \"react\";\r\nimport Layout from \"../core/Layout\";\r\nimport { isAuthenticated } from \"../auth\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { createProduct, getCategories } from \"./apiAdmin\";\r\n\r\nconst AddProduct = () => {\r\n  const [values, setValues] = useState({\r\n    name: \"\",\r\n    description: \"\",\r\n    price: \"\",\r\n    categories: [],\r\n    category: \"\",\r\n    shipping: \"\",\r\n    quantity: \"\",\r\n    photo: \"\",\r\n    loading: false,\r\n    error: \"\",\r\n    createdProduct: \"\",\r\n    redirectToProfile: false,\r\n    formData: new FormData()\r\n  });\r\n\r\n  const { user, token } = isAuthenticated();\r\n  const {\r\n    name,\r\n    description,\r\n    price,\r\n    categories,\r\n    category,\r\n    shipping,\r\n    quantity,\r\n    loading,\r\n    error,\r\n    createdProduct,\r\n    redirectToProfile,\r\n    formData\r\n  } = values;\r\n\r\n  // load categories and set form data\r\n  const init = () => {\r\n    getCategories().then(data => {\r\n      console.log(\"in getCategories!!!\");\r\n      if (data.error) {\r\n        console.log(\"error in get categories\");\r\n        setValues({ ...values, error: data.error });\r\n      } else {\r\n        console.log(\"else in get categories\");\r\n        setValues({\r\n          ...values,\r\n          categories: data\r\n        });\r\n      }\r\n    });\r\n  };\r\n\r\n  useEffect(() => {\r\n    console.log(\"use effetc, page loaded\");\r\n    init();\r\n  }, []);\r\n\r\n  const handleChange = name => event => {\r\n    const value = name === \"photo\" ? event.target.files[0] : event.target.value;\r\n    formData.set(name, value);\r\n    setValues({ ...values, [name]: value });\r\n  };\r\n\r\n  const clickSubmit = event => {\r\n    event.preventDefault();\r\n    setValues({ ...values, error: \"\", loading: true });\r\n\r\n    createProduct(user._id, token, formData).then(data => {\r\n      if (data.error) {\r\n        setValues({ ...values, error: data.error });\r\n      } else {\r\n        setValues({\r\n          ...values,\r\n          name: \"\",\r\n          description: \"\",\r\n          photo: \"\",\r\n          price: \"\",\r\n          quantity: \"\",\r\n          loading: false,\r\n          createdProduct: data.name\r\n        });\r\n      }\r\n    });\r\n  };\r\n\r\n  const newPostForm = () => (\r\n    <form className=\"mb-3\" onSubmit={clickSubmit}>\r\n      <h4>Post Photo</h4>\r\n      <div className=\"form-group\">\r\n        <label className=\"btn btn-secondary\">\r\n          <input\r\n            onChange={handleChange(\"photo\")}\r\n            type=\"file\"\r\n            name=\"photo\"\r\n            accept=\"image/*\"\r\n          />\r\n        </label>\r\n      </div>\r\n\r\n      <div className=\"form-group\">\r\n        <label className=\"text-muted\">Name</label>\r\n        <input\r\n          onChange={handleChange(\"name\")}\r\n          type=\"text\"\r\n          className=\"form-control\"\r\n          value={name}\r\n        />\r\n      </div>\r\n\r\n      <div className=\"form-group\">\r\n        <label className=\"text-muted\">Description</label>\r\n        <textarea\r\n          onChange={handleChange(\"description\")}\r\n          className=\"form-control\"\r\n          value={description}\r\n        />\r\n      </div>\r\n\r\n      <div className=\"form-group\">\r\n        <label className=\"text-muted\">Price</label>\r\n        <input\r\n          onChange={handleChange(\"price\")}\r\n          type=\"number\"\r\n          className=\"form-control\"\r\n          value={price}\r\n        />\r\n      </div>\r\n\r\n      <div className=\"form-group\">\r\n        <label className=\"text-muted\">Category</label>\r\n        <select onChange={handleChange(\"category\")} className=\"form-control\">\r\n          <option>Please select</option>\r\n          {categories &&\r\n            categories.map((c, i) => (\r\n              <option key={i} value={c._id}>\r\n                {c.name}\r\n              </option>\r\n            ))}\r\n        </select>\r\n      </div>\r\n\r\n      <div className=\"form-group\">\r\n        <label className=\"text-muted\">Shipping</label>\r\n        <select onChange={handleChange(\"shipping\")} className=\"form-control\">\r\n          <option>Please select</option>\r\n          <option value=\"0\">No</option>\r\n          <option value=\"1\">Yes</option>\r\n        </select>\r\n      </div>\r\n\r\n      <div className=\"form-group\">\r\n        <label className=\"text-muted\">Quantity</label>\r\n        <input\r\n          onChange={handleChange(\"quantity\")}\r\n          type=\"number\"\r\n          className=\"form-control\"\r\n          value={quantity}\r\n        />\r\n      </div>\r\n\r\n      <button className=\"btn btn-outline-primary\">Create Product</button>\r\n    </form>\r\n  );\r\n\r\n  const showError = () => (\r\n    <div\r\n      className=\"alert alert-danger\"\r\n      style={{ display: error ? \"\" : \"none\" }}\r\n    >\r\n      {error}\r\n    </div>\r\n  );\r\n\r\n  const showSuccess = () => (\r\n    <div\r\n      className=\"alert alert-info\"\r\n      style={{ display: createdProduct ? \"\" : \"none\" }}\r\n    >\r\n      <h2>{`${createdProduct}`} is created!</h2>\r\n    </div>\r\n  );\r\n\r\n  const showLoading = () =>\r\n    loading && (\r\n      <div className=\"alert alert-success\">\r\n        <h2>Loading...</h2>\r\n      </div>\r\n    );\r\n\r\n\r\n  return (\r\n    <Layout\r\n      title=\"Add a new product\"\r\n      description={`Hey, ${user.name}, add a new product!`}\r\n    >\r\n      <div className=\"row\">\r\n        <div className=\"col-md-8 offset-md-2\">\r\n          {showLoading()}\r\n          {showSuccess()}\r\n          {showError()}\r\n          {newPostForm()}\r\n        </div>\r\n      </div>\r\n    </Layout>\r\n  );\r\n};\r\n\r\nexport default AddProduct;\r\n","import React, {useState, useEffect} from 'react';\r\n\r\n\r\nconst Checkbox = ({categories, handleFilters}) => {\r\n    const [checked, setChecked] = useState([]);\r\n\r\n    const handleToggle = c => () => {\r\n    // return the first index or -1\r\n       const currentCategoryId = checked.indexOf(c);\r\n       const newCheckedCategoryId = [...checked]\r\n    // if currently checked was not already in checked state - push\r\n    // wlse pull/take of\r\n        if(currentCategoryId === -1){\r\n            newCheckedCategoryId.push(c);\r\n        } else {\r\n            newCheckedCategoryId.splice(currentCategoryId)\r\n        }\r\n\r\n        // console.log(newCheckedCategoryId);\r\n        setChecked(newCheckedCategoryId);\r\n        handleFilters(newCheckedCategoryId)\r\n    }\r\n\r\n    console.log(\"categories: \", categories);\r\n\r\n    return categories === [] ? (\r\n        <div>\r\n          No trees or no internet connection\r\n        </div>\r\n    ) : (\r\n        categories.map((c, i) =>  (\r\n               <li key={i} className=\"list-unstyled\">\r\n                   <input onClick={handleToggle(c._id)} type=\"checkbox\" value={checked.indexOf(c._id === -1)} className=\"form-check-input\" />\r\n                   <label className=\"form-check-label\">{c.name}</label>\r\n               </li>\r\n        ))\r\n    )\r\n\r\n\r\n\r\n};\r\n\r\nexport default Checkbox;\r\n\r\n\r\n\r\n// return categories && categories.map((c, i) =>  (\r\n//        <li key={i} className=\"list-unstyled\">\r\n//            <input onClick={handleToggle(c._id)} type=\"checkbox\" value={checked.indexOf(c._id === -1)} className=\"form-check-input\" />\r\n//            <label className=\"form-check-label\">{c.name}</label>\r\n//        </li>\r\n// ));\r\n","import React, { useState, useEffect, Fragment} from \"react\";\r\n\r\nconst RadioBox = ({prices, handleFilters}) => {\r\n    const [value, setValue] = useState(0);\r\n    const handleChange =(event) => {\r\n        console.log(\"event.target.value: \", event.target.value);\r\n        handleFilters(event.target.value);\r\n        setValue(event.target.value);\r\n    }\r\n\r\n    return prices.map((p, i) =>  (\r\n           <div key={i}>\r\n               <input onClick={handleChange} type=\"radio\" name={p} value={`${p._id}`} className=\"mr-2 ml-4\" />\r\n               <label className=\"form-check-label\">{p.name}</label>\r\n           </div>\r\n   ));\r\n}\r\n\r\nexport default RadioBox;\r\n","\r\nexport const prices = [\r\n    {\r\n        _id: 0,\r\n        name: \"Any\",\r\n        array: []\r\n    },\r\n    {\r\n        _id: 1,\r\n        name: \"0 to 9\",\r\n        array: [0, 9]\r\n    },\r\n    {\r\n        _id: 2,\r\n        name: \"10 to 19\",\r\n        array: [10, 19]\r\n    },\r\n    {\r\n        _id: 3,\r\n        name: \"20 to 29\",\r\n        array: [20, 29]\r\n    },\r\n    {\r\n        _id: 4,\r\n        name: \"30 to 39\",\r\n        array: [20, 29]\r\n    },\r\n    {\r\n        _id: 5,\r\n        name: \"More then 40\",\r\n        array: [40, 10000]\r\n    }\r\n]\r\n","import React, {useEffect, useState} from \"react\";\r\nimport Layout from \"./Layout\";\r\nimport Card from './Card';\r\nimport {getCategories, getFilteredProducts} from \"./apiCore\";\r\nimport Checkbox from './Checkbox';\r\nimport RadioBox from './RadioBox'\r\nimport {prices} from \"./fixedPrices\";\r\nimport Arrow from \"./images/arrow.svg\"\r\n\r\n\r\nconst Shop =() => {\r\n    const [myFilters, setMyFilters] =  useState({\r\n        filters: { category: [], price: [] }\r\n    });\r\n    const [categories, setCategories] = useState([]);\r\n    const [error, setError] = useState(false);\r\n    const [limit, setLimit] = useState(6);\r\n    const [skip, setSkip] = useState(0);\r\n    const [size, setSize] = useState(0);\r\n    const [filteredResults, setFilteredResults] = useState([]);\r\n    const [arrowPosition, setArrowPosition] = useState(\"filters-icon\")\r\n    const [filtersHide, setFiltersHide] = useState(\"filters\");\r\n\r\n    const init = () => {\r\n      getCategories().then(data => {\r\n        console.log(\"in getCategories!!!\");\r\n        if (data.error) {\r\n          console.log(\"error in get categories\");\r\n          setError({error: data.error });\r\n        } else {\r\n          console.log(\"else in get categories\");\r\n          setCategories(data);\r\n        }\r\n      });\r\n    };\r\n\r\n    const loadFilteredResults = (newFilters) => {\r\n        // console.log(\"newFilters\", newFilters);\r\n        getFilteredProducts(skip, limit, newFilters).then(data=> {\r\n            if(data.error) {\r\n                setError(data.error);\r\n            } else {\r\n                console.log(\"data: \", data.data);\r\n                setFilteredResults(data.data)\r\n                setSize(data.size);\r\n                setSkip(0);\r\n            }\r\n        });\r\n    }\r\n\r\n    const loadMore = () => {\r\n        let toSkip = skip + limit\r\n        getFilteredProducts(toSkip, limit, myFilters.filters).then(data=> {\r\n            if(data.error) {\r\n                setError(data.error);\r\n            } else {\r\n                console.log(\"data: \", data.data);\r\n                setFilteredResults([...filteredResults, ...data.data])\r\n                setSize(data.size);\r\n                setSkip(toSkip);\r\n            }\r\n        });\r\n    }\r\n\r\n\r\n    const loadMoreButton = () => {\r\n        return (\r\n            size > 0 && size >= limit && (\r\n                <button onClick={loadMore} className=\"btn btn-warning mb-5\">Load More</button>\r\n            )\r\n        )\r\n    }\r\n\r\n    useEffect(()=>{\r\n        init();\r\n        loadFilteredResults(skip, limit, myFilters.filters);\r\n    },[]);\r\n\r\n   const handleFilters = (filters, filterBy) => {\r\n       // console.log(filters, filterBy);\r\n       const newFilters = {...myFilters}\r\n       newFilters.filters[filterBy] = filters;\r\n\r\n       if(filterBy == \"price\") {\r\n           let priceValues = handlePrice(filters)\r\n           newFilters.filters[filterBy] = priceValues;\r\n       }\r\n\r\n\r\n       loadFilteredResults(myFilters.filters);\r\n       setMyFilters(newFilters);\r\n   }\r\n\r\n   const handlePrice = value => {\r\n       const data = prices;\r\n       let array = [];\r\n       for(let key in data) {\r\n           if(data[key]._id === parseInt(value)) {\r\n               array = data[key].array\r\n           }\r\n       }\r\n       return array;\r\n   };\r\n\r\n\r\nconst showFilters = () => {\r\n    setArrowPosition(arrowPosition !== \"filters-icon filters-icon-rotate\" ? \"filters-icon filters-icon-rotate\": \"filters-icon\");\r\n    setFiltersHide(filtersHide === \"filters\" ? \"filters hide-filters\":\"filters\")\r\n}\r\n\r\n   // const filters = 1;\r\n    return (\r\n        <Layout title=\"Plantation Page\" description=\"Choose which tree you want to plant. Every single tree grabs 6-7kg carbon from the air per year.\" className=\"container-fluid\">\r\n            <div className=\"show-filters\">\r\n                <div style={{width: \"40px\"}}>\r\n                    <img src={Arrow} className={arrowPosition} onClick={showFilters}/>\r\n                </div>\r\n            </div>\r\n            <div className=\"row\">\r\n                <div className={filtersHide}>\r\n                    <div className=\"filter-div\">\r\n                        <h4>Filter by categories</h4>\r\n                        <ul>\r\n                            <Checkbox categories={categories} handleFilters={filters => handleFilters(filters, \"category\")}/>\r\n                        </ul>\r\n                    </div>\r\n                    <div className=\"filter-div\">\r\n                        <h4>Filter by price range</h4>\r\n                        <div>\r\n                            <RadioBox prices={prices} handleFilters={filters => handleFilters(filters, \"price\")}/>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n                {/*<div className=\"col-9\">*/}\r\n                   <div className=\"search-products-div\">\r\n                       {filteredResults.map((product, i) => (\r\n                           <div className=\"search-card-container\"  key={i}>\r\n                               <Card product={product} />\r\n                           </div>\r\n                       ))}\r\n                   </div>\r\n                   <div style={{display: \"flex\", width: \"100%\", justifyContent:\"center\"}}>\r\n                       {loadMoreButton()}\r\n                   </div>\r\n                {/*</div>*/}\r\n\r\n\r\n            </div>\r\n        </Layout>\r\n    );\r\n}\r\n\r\nexport default Shop;\r\n\r\n\r\n\r\n// <div className=\"col-8\">\r\n//     <h2 className=\"mb-4\">Products</h2>\r\n//     <div className=\"row\">\r\n        // {filteredResults.map((product, i) => (\r\n        //     <div key={i} className=\"col-4 mb-3\">\r\n        //         <Card product={product} />\r\n        //     </div>\r\n        // ))}\r\n//     </div>\r\n// </div>\r\n","import React, {useEffect, useState} from \"react\";\r\nimport Layout from \"./Layout\";\r\nimport {read, listRelated} from './apiCore';\r\nimport Card from './Card';\r\n\r\n\r\nconst Product = props => {\r\n    const [product, setProduct] = useState({});\r\n    const [relatedProduct, setRelatedProduct] = useState([]);\r\n    const [error, setError] = useState(false);\r\n    const location = props.match.params.productId;\r\n    console.log(\"location: \", location);\r\n\r\n\r\n    const loadSingleProduct = productId => {\r\n        read(productId).then(data=> {\r\n            if(data.error){\r\n                setError(data.error);\r\n            } else {\r\n                setProduct(data);\r\n                // fetch related products\r\n                listRelated(data._id).then(data => {\r\n                    if(data.error) {\r\n                        setError(data.error);\r\n                    } else {\r\n                        setRelatedProduct(data);\r\n                    }\r\n                });\r\n            }\r\n        })\r\n    }\r\n\r\n    useEffect(()=>{\r\n        const productId = props.match.params.productId;\r\n        loadSingleProduct(productId);\r\n    }, [props])\r\n\r\n    return (\r\n        <Layout title={product && product.name} description={product && product.description && product.description.substring(0, 100)} className=\"container-fluid\">\r\n            <div className=\"product-continer\">\r\n                <div className=\"show-product margin\">\r\n                    {product && product.description && <Card product={product} showViewProductButton={false}/>}\r\n                </div>\r\n                <div className=\"related-product\">\r\n                    <h4>Related Products</h4>\r\n                    {relatedProduct.map((p,i)=>(\r\n                        <div className=\"mb-3\" key={i} >\r\n                            <Card product={p}/>\r\n                        </div>\r\n                    ))}\r\n                </div>\r\n            </div>\r\n        </Layout>\r\n    );\r\n\r\n}\r\n\r\n\r\n\r\nexport default Product;\r\n","import React, { useState, useEffect } from 'react';\r\nimport Layout from './Layout';\r\nimport { getProducts, getBraintreeClientToken, processPayment } from './apiCore';\r\nimport Card from './Card';\r\nimport {Link} from 'react-router-dom'\r\nimport {isAuthenticated} from \"../auth\";\r\nimport DropIn from 'braintree-web-drop-in-react';\r\nimport {emptyCart} from './cartHelpers';\r\n\r\nconst Checkout = ({products, setRun, run = undefined}) => {\r\n    const [data, setData] = useState({\r\n        success: false,\r\n        successPay: false,\r\n        clientToken: null,\r\n        error: '',\r\n        instance: {},\r\n        address: ''\r\n    })\r\n\r\n\r\n\r\n    const userId = isAuthenticated() && isAuthenticated().user._id\r\n    const token = isAuthenticated() && isAuthenticated().token\r\n\r\n    const getToken = (userId, token) => {\r\n        getBraintreeClientToken(userId, token).then(data => {\r\n            if(data.error) {\r\n                setData({...data, error: data.error})\r\n            } else {\r\n                setData({\r\n                    ...data, clientToken: data.clientToken\r\n                })\r\n                console.log(\"instance: \", data.instance);\r\n            }\r\n        });\r\n    }\r\n\r\n    useEffect(()=> {\r\n        getToken(userId, token)\r\n    }, [])\r\n\r\n\r\n    const getTotal = () => {\r\n        return products && products.reduce((currentValue, nextValue) => {\r\n            return currentValue + nextValue.count * nextValue.price;\r\n        }, 0);\r\n    };\r\n\r\n   const showCheckout = () => {\r\n       return (\r\n           isAuthenticated() ? (\r\n               <div>{showDropIn()}</div>\r\n           ) : (\r\n               <Link to={\"/signin\"}><button className=\"btn btn-primary\">Sign in to checkout</button></Link>\r\n           )\r\n       )\r\n   }\r\n\r\n    const buy = ()=> {\r\n        // send the nonce to your server nonce = data.instance.requestPaymentMethod()\r\n        let nonce;\r\n        let getNonce = data.instance.requestPaymentMethod().then(\r\n            data => {\r\n                nonce = data.nonce;\r\n                const paymentData ={\r\n                    paymentMethodNonce: nonce,\r\n                    amount: getTotal(products)\r\n                }\r\n                console.log(\"userId, token, paymentData: \",userId, token, paymentData);\r\n                processPayment(userId, token, paymentData)\r\n                .then(response => {\r\n                    // console.log(response)\r\n                    setData({\r\n                        ...data, success: response.success, successPay: true\r\n                    });\r\n                    // empty card\r\n                    emptyCart(()=>{\r\n                        console.log(\"payment success empty cart\");\r\n                    })\r\n                    // create order\r\n                    setRun(!run);\r\n                })\r\n                .catch(error=> {console.log(error)})\r\n            }).catch(error => {\r\n                    console.log(\"dropin error: \", error);\r\n                    setData({\r\n                        ...data, error: error.message\r\n                    });\r\n            });\r\n    };\r\n\r\n    const showDropIn = () => (\r\n        <div onBlur={() => setData({...data, error:''})}>\r\n           {data.clientToken !== null && products.length > 0 ? (\r\n               <div>\r\n                   <DropIn options={{\r\n                       authorization: data.clientToken\r\n                   }} onInstance={instance => data.instance = instance} />\r\n\r\n                   <button onClick={buy} className=\"btn btn-success btn-block\">Pay</button>\r\n               </div>\r\n           ) : null}\r\n        </div>\r\n    )\r\n\r\n    const showError = error => (\r\n        <div className=\"alert alert-danger\" style={{display: error ? '' : 'none'}}>\r\n            {error}\r\n        </div>\r\n    )\r\n\r\n\r\n    const showSuccess = success => (\r\n        <div className=\"alert alert-info\" style={{display: success ? '' : 'none'}}>\r\n            Thanks, You are making this planet more green <img src=\"./ecology.svg\" alt=\"bla\" style={{width: \"30px\"}}/>\r\n        </div>\r\n    )\r\n\r\n    return (\r\n        <div>\r\n            <h2>Total: {getTotal()}</h2>\r\n            {showSuccess(data.successPay)}\r\n            {showError(data.error)}\r\n            {showCheckout(data.success)}\r\n        </div>\r\n    )\r\n\r\n}\r\n\r\nexport default Checkout;\r\n","import React, {useEffect, useState} from \"react\";\r\nimport Layout from \"./Layout\";\r\nimport {getCart} from './cartHelpers';\r\nimport Card from './Card';\r\nimport {Link} from \"react-router-dom\";\r\nimport Checkout from \"./Checkout\";\r\n\r\nconst Cart = () => {\r\n    const [items, setItems] = useState(0);\r\n    const [run, setRun] = useState(false);\r\n\r\n    useEffect(() => {\r\n        (async () => {\r\n            try {\r\n                setItems(getCart());\r\n            } catch (e) {\r\n                console.log(e);\r\n            }\r\n        })();\r\n    }, [run]);\r\n\r\n    console.log(\"items in state: \", items.length);\r\n    // console.log(\"getCart: \", getCart());\r\n    const showItems = items => {\r\n        return (\r\n            <div>\r\n                <h3>\r\n                    Your basket has {items.length} items.\r\n                </h3>\r\n                {items && items.map((product, i)=>(\r\n                    <Card\r\n                        key={i}\r\n                        product={product}\r\n                        showAddToCartButton={false}\r\n                        cartUpdate={true}\r\n                        setRun={setRun}\r\n                        run={run}\r\n                    />\r\n                ))}\r\n            </div>\r\n        )\r\n    }\r\n\r\n\r\n    const noItemsMessage = () => {\r\n        return (\r\n            <h3>\r\n                Your basket is empty. <br/>\r\n                <Link to=\"/shop\">Continue Shopping</Link>\r\n            </h3>\r\n        )\r\n    }\r\n\r\n    return (\r\n        <Layout title=\"Shopping Basket\" description=\"Manage your real-world-changing energy in your basket\" className=\"container-fluid\">\r\n\r\n        <div className=\"card-container\">\r\n            <div className=\"col-6 margin\">\r\n                <h2 className=\"mb-4\">Your card summary</h2>\r\n                <hr/>\r\n                <Checkout products={items} setRun={setRun}/>\r\n            </div>\r\n            <div className=\"col-6\">\r\n                {items.length > 0 ? showItems(items) : noItemsMessage()}\r\n            </div>\r\n\r\n        </div>\r\n\r\n        </Layout>\r\n    );\r\n}\r\n\r\nexport default Cart;\r\n","import React from \"react\";\r\nimport { BrowserRouter, Switch, Route } from \"react-router-dom\";\r\nimport Signup from \"./user/Signup\";\r\nimport Signin from \"./user/Signin\";\r\nimport Home from \"./core/Home\";\r\nimport PrivateRoute from \"./auth/PrivateRoute\";\r\nimport AdminRoute from \"./auth/AdminRoute\";\r\nimport Dashboard from \"./user/UserDashboard\";\r\nimport AdminDashboard from \"./user/AdminDashboard\";\r\nimport AddCategory from \"./admin/AddCategory\";\r\nimport AddProduct from \"./admin/AddProduct\";\r\nimport Shop from \"./core/Shop\";\r\nimport Product from \"./core/Product\";\r\nimport Cart from \"./core/Cart\";\r\nimport \"./style.css\";\r\n\r\nconst Routes = () => {\r\n  return (\r\n    <BrowserRouter>\r\n      <Switch>\r\n        <Route exact path=\"/\" component={Home} />\r\n        <Route path=\"/shop\" component={Shop} />\r\n        <Route path=\"/signin\" component={Signin} />\r\n        <Route path=\"/signup\" component={Signup} />\r\n        <PrivateRoute path=\"/user/dashboard\" exact component={Dashboard} />\r\n        <AdminRoute path=\"/admin/dashboard\" exact component={AdminDashboard} />\r\n        <AdminRoute path=\"/create/category\" exact component={AddCategory} />\r\n        <AdminRoute path=\"/create/product\" exact component={AddProduct} />\r\n        <Route exact path=\"/product/:productId\" component={Product} />\r\n        <Route exact path=\"/card\" component={Cart} />\r\n      </Switch>\r\n    </BrowserRouter>\r\n  );\r\n};\r\n\r\nexport default Routes;\r\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport Routes from \"./Routes\";\n\nReactDOM.render(<Routes />, document.getElementById(\"root\"));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\n"],"sourceRoot":""}